{"version":3,"file":"index.esm.js","sources":["index.js"],"sourcesContent":["import e from\"node:net\";import t from\"node:os\";function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},o.apply(this,arguments)}class r extends Error{constructor(e){super(`${e} is locked`)}}const n={old:new Set,young:new Set};let s;const i=t=>new Promise((o,r)=>{const n=e.createServer();n.unref(),n.on(\"error\",r),n.listen(t,()=>{const{port:e}=n.address();n.close(()=>{o(e)})})}),a=async(e,t)=>{if(e.host||0===e.port)return i(e);for(const o of t)try{await i({port:e.port,host:o})}catch(e){if(![\"EADDRNOTAVAIL\",\"EINVAL\"].includes(e.code))throw e}return e.port};async function u(e){let i,u=new Set;if(e&&(e.port&&(i=\"number\"==typeof e.port?[e.port]:e.port),e.exclude)){const t=e.exclude;if(\"function\"!=typeof t[Symbol.iterator])throw new TypeError(\"The `exclude` option must be an iterable.\");for(const e of t){if(\"number\"!=typeof e)throw new TypeError(\"Each item in the `exclude` option must be a number corresponding to the port you want excluded.\");if(!Number.isSafeInteger(e))throw new TypeError(`Number ${e} in the exclude option is not a safe integer and can't be used`)}u=new Set(t)}void 0===s&&(s=setTimeout(()=>{s=void 0,n.old=n.young,n.young=new Set},15e3),s.unref&&s.unref());const c=(()=>{const e=t.networkInterfaces(),o=new Set([void 0,\"0.0.0.0\"]);for(const t of Object.values(e))for(const e of t)o.add(e.address);return o})();for(const t of function*(e){e&&(yield*e),yield 0}(i))try{if(u.has(t))continue;let s=await a(o({},e,{port:t}),c);for(;n.old.has(s)||n.young.has(s);){if(0!==t)throw new r(t);s=await a(o({},e,{port:t}),c)}return n.young.add(s),s}catch(e){if(!([\"EADDRINUSE\",\"EACCES\"].includes(e.code)||e instanceof r))throw e}throw new Error(\"No available ports found\")}function c(e,t){if(!Number.isInteger(e)||!Number.isInteger(t))throw new TypeError(\"`from` and `to` must be integer numbers\");if(e<1024||e>65535)throw new RangeError(\"'from' must be between 1024 and 65535\");if(t<1024||t>65535)throw new RangeError(\"'to' must be between 1024 and 65535\");if(e>t)throw new RangeError(\"`to` must be greater than or equal to `from`\");return function*(e,t){for(let o=e;o<=t;o++)yield o}(e,t)}export{u as default,c as portNumbers};\n//# sourceMappingURL=index.js.map\n"],"names":["s","u","e","_temp7","_exit2","i","_result5","Error","Set","port","exclude","t","Symbol","iterator","TypeError","_step","_iterator","_createForOfIteratorHelperLoose","done","value","Number","isSafeInteger","setTimeout","n","old","young","unref","c","networkInterfaces","o","_i2","_Object$values","Object","values","length","_step2","_iterator2","add","address","_temp6","_forOf","_regeneratorRuntime","mark","_callee2","wrap","_context2","prev","next","t0","delegateYield","stop","_catch","has","Promise","resolve","a","then","_temp5","_result4","_temp3","_temp4","_for","_exit3","r","_a","includes","code","reject","_Error","call","_wrapNativeSuper","createServer","on","listen","close","_temp2","_result2","_exit","host","_temp","isInteger","RangeError","_callee","_o","_callee$","_context"],"mappings":"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"}